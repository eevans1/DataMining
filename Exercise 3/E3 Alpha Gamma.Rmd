---
title: "Exercise 1"
output: github_document
date: "`r format(Sys.time(), '%d %B %Y')`"
---

```{r setup, include=FALSE, message=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
greenbuildings <- read.csv("https://raw.githubusercontent.com/jgscott/ECO395M/master/data/greenbuildings.csv")
library(tidyverse)
library(mosaic)
library(foreach)
# Lets first try the step function

g <- greenbuildings[complete.cases(greenbuildings),]

lm = lm(Rent ~ 
          size + age + class_a + class_b + 
          amenities + cluster_rent + cluster,
        data = g)
summary(lm)
lm_step = step(lm, 
               scope=~(. + empl_gr + stories + green_rating + leasing_rate + renovated)^2)

library(gamlr) 
scx = sparse.model.matrix(Rent ~ ., data=g)[,-1]
scy = g$Rent
sclasso = gamlr(scx, scy)
plot(sclasso)

lmstepbeta = coef(lm_step)
## Green rating: 1.477

scbeta = coef(sclasso) 
## Green rating coef: -0.3294
```